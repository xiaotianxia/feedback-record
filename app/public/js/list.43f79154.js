(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list"],{"120c":function(e,t,a){"use strict";var l=a("1c88"),n=a.n(l);n.a},"1c88":function(e,t,a){},"27e8":function(e,t,a){},"78a9":function(e,t,a){"use strict";var l=a("27e8"),n=a.n(l);n.a},a479:function(e,t){var a={RESOLVE_STATUS_NAME:[{value:0,label:"待解决"},{value:1,label:"已解决"},{value:2,label:"不予解决"},{value:3,label:"暂缓解决"},{value:4,label:"重复问题"}],MEDIA_NAME:[{value:0,label:"截图"},{value:1,label:"录屏"}],TYPE_NAME:[{value:0,label:"问题反馈"},{value:1,label:"点赞"}]};e.exports=a},cbdf:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fbr-list"},[a("h3",[e._v("反馈列表")]),a("el-form",{attrs:{model:e.queryParams,inline:""}},[a("el-form-item",{attrs:{label:"提交系统"}},[a("el-input",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.queryParams.sys_name,callback:function(t){e.$set(e.queryParams,"sys_name",t)},expression:"queryParams.sys_name"}})],1),a("el-form-item",{attrs:{label:"反馈类型"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"反馈方式"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.queryParams.media,callback:function(t){e.$set(e.queryParams,"media",t)},expression:"queryParams.media"}},e._l(e.mediaMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.resolveStatusMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")])],1),a("el-form-item",[a("a",{staticClass:"el-button el-button--primary is-plain el-button--mini",attrs:{href:e.downloadHref,target:"_blank"}},[e._v("下载列表")])])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"type",width:"90",label:"反馈类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.type_name))]}}])}),a("el-table-column",{attrs:{label:"提交系统",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.sys_name))]}}])}),a("el-table-column",{attrs:{prop:"media",label:"反馈方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_name))]}}])}),a("el-table-column",{attrs:{width:"200",prop:"word",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("cutStr")(t.row.word,20)))])]}}])}),a("el-table-column",{attrs:{label:"提交人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.submitter_name))]}}])}),a("el-table-column",{attrs:{label:"提交时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.create_time))]}}])}),a("el-table-column",{attrs:{label:"解决状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.status_name))]}}])}),a("el-table-column",{attrs:{width:"80",prop:"data",label:"快速查看"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{loading:t.row.loading,icon:0===t.row.media?"el-icon-picture":"el-icon-video-play",size:"mini"},on:{click:function(a){return e.onPreview(t.row)}}})]}}])}),a("el-table-column",{attrs:{fixed:"right",width:"220",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"#/detail?id="+t.row.id,target:"_blank"}},[e._v("详情")]),a("el-select",{staticStyle:{width:"100px",margin:"0 12px"},attrs:{placeholder:"请选择",size:"mini"},on:{change:function(a){return e.onResolveChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.resolveStatusMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-button",{attrs:{disabled:1!==t.row.status&&2!==t.row.status&&4!==t.row.status,type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.onDelete(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[5,10,20,50,100],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",background:"",total:e.total},on:{"size-change":e.onPageSizeChange,"current-change":e.onPageChange}}),a("player-dialog",{ref:"playerDialog",attrs:{onlyPreview:""}}),a("image-preview-dialog",{ref:"imagePreviewDialog"})],1)},n=[],s=a("cebc"),i=a("2bdd"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.show,fullscreen:"",center:"",top:"0","append-to-body":"",title:"截图"},on:{"update:visible":function(t){e.show=t}}},[a("div",{ref:"imgWrapper",staticClass:"imgWrapper"},[a("img",{ref:"img",attrs:{src:e.imgdata,alt:"截图"}})]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"el-button el-button--text",attrs:{href:e.imgdata,download:"反馈截图_"+(new Date).getTime()}},[e._v("下载文件")]),a("el-button",{attrs:{size:"mini"},on:{click:e.onCancel}},[e._v("关闭")])],1)])},o=[],u={data:function(){return{show:!1,imgdata:""}},methods:{showDialog:function(e){var t=this;this.show=!0,this.$nextTick(function(){t.$img=t.$refs.img,t.imgdata=e,t.$img.onload=function(){t.ajustScroll(t.$img)}})},ajustScroll:function(e){var t=this.$refs.imgWrapper;t.scrollLeft=(e.width-t.offsetWidth)/2},onCancel:function(){this.show=!1}}},c=u,d=(a("78a9"),a("2877")),m=Object(d["a"])(c,r,o,!1,null,"d0027e9e",null),f=m.exports,p=a("fa7d"),g=a("a479"),v=a.n(g),b=a("d96a"),h=a("a6b6"),y={name:"feedbackList",data:function(){return{loading:!1,queryParams:{sys_name:"",type:"",media:"",status:"",pageNo:1,pageSize:10},resolveStatusMap:v.a.RESOLVE_STATUS_NAME,typeMap:v.a.TYPE_NAME,mediaMap:v.a.MEDIA_NAME,total:0,list:[]}},computed:{downloadHref:function(){return"".concat(h["server_url"],"/list/download?").concat(Object(p["d"])(this.queryParams))}},components:{PlayerDialog:i["a"],ImagePreviewDialog:f},methods:{getList:function(){var e=this,t=Object(s["a"])({},this.queryParams);this.loading=!0,b["a"].getList(t).then(function(t){e.loading=!1;var a=t.data.data;0===t.data.status&&(e.total=a.total,e.list=a.list||[])})},onSearch:function(){this.queryParams.pageNo=1,this.getList()},onPreview:function(e){var t=this;this.$set(e,"loading",!0);var a={id:e.id};b["a"].view(a).then(function(a){var l=a.data.data;t.$set(e,"loading",!1),0===a.data.status&&(0===e.media?t.$refs.imagePreviewDialog.showDialog(l.data):t.$refs.playerDialog.showDialog(JSON.parse(l.data)||[]))})},onResolveChange:function(e){var t=this,a={id:e.id,status:e.status};this.loading=!0,b["a"].resolve(a).then(function(e){t.loading=!1,0===e.data.status&&(t.$message.success("状态已变更"),t.getList())})},onDelete:function(e){var t=this;this.$confirm("确定要删除此条记录吗？","提示",{type:"warning"}).then(function(){var a={id:e.id};t.loading=!0,b["a"].delete(a).then(function(e){t.loading=!1,0===e.data.status&&(t.$message.success("删除成功"),t.getList())})})},onPageChange:function(e){this.queryParams.pageNo=e,this.getList()},onPageSizeChange:function(e){this.queryParams.pageNo=1,this.queryParams.pageSize=e,this.getList()}},mounted:function(){this.getList()}},_=y,w=(a("120c"),Object(d["a"])(_,l,n,!1,null,"766636a6",null));t["default"]=w.exports}}]);